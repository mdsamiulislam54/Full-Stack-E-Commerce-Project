import{d as f,j as e,q as S,r as i,s as D,I,t as N,b as y,u as v,c as j,v as P,e as z,w as A,x as O,y as U,z as E,A as L,D as F,o as B,L as u,E as g,W as M,H as R,V as $,J as p,K as _}from"./index-BM3FpbtU.js";const b=()=>{const s=f(n=>n.user.user);return e.jsx("div",{className:" flex items-center justify-center  px-4",children:e.jsxs("div",{className:"bg-white/80 backdrop-blur-md p-10 rounded-xl text-center  max-w-md w-full",children:[e.jsx("div",{className:"flex justify-center items-center",children:e.jsx("img",{className:" rounded-full object-cover ",src:S,alt:s==null?void 0:s.name})}),e.jsx("h1",{className:"text-4xl font-bold text-gray-800 mb-4",children:"Welcome â¤ï¸â€ðŸ©¹"}),e.jsxs("h1",{className:"text-4xl font-bold text-gray-800 mb-4",children:[s==null?void 0:s.name,"! ðŸ‘‹"]}),e.jsx("p",{className:"text-gray-600 mb-6",children:"Glad to see you again. Letâ€™s manage your profile and explore the dashboard."})]})})},q=()=>{const[s,n]=i.useState({name:"",email:"",phone:"",Address:"",zip:"",Division:"",country:"",Districts:"",Upzilla:""}),[t,c]=i.useState({}),[o,r]=i.useState(!1),d=()=>{r(!0)},x=()=>{r(!1)};i.useEffect(()=>{const h=localStorage.getItem("userProfile");h&&n(JSON.parse(h))},[]);const l=h=>{const{name:w,value:k}=h.target;n(C=>({...C,[w]:k}))},m=()=>{localStorage.setItem("userProfile",JSON.stringify(s)),N.fire({title:"Success! ðŸŽ‰",text:"Successfully saved ðŸŽ‰ðŸŽ‰ðŸŽ‰",icon:"success",confirmButtonText:"Cool ðŸ˜Ž"}),r(!1)},a=localStorage.getItem("userProfile");return console.log(a),e.jsxs("div",{className:"p-10",children:[e.jsxs("div",{className:"grid sm:grid-cols-3 gap-2",children:[e.jsxs("div",{className:"flex flex-col gap-3 mb-4 bg-gray-100 p-2",children:[e.jsx("h2",{className:"text-md tracking-wide font-dm-snas font-semibold",children:"Full Name:"}),e.jsx("p",{className:"text-sm tracking-wide",children:s.name})]}),e.jsxs("div",{className:"flex flex-col gap-3 mb-4 bg-gray-100 p-2",children:[e.jsx("h2",{className:"text-md tracking-wide font-dm-snas font-semibold",children:"Email:"}),e.jsx("p",{className:"text-sm tracking-wide",children:s.email})]}),e.jsxs("div",{className:"flex flex-col gap-3 mb-4 bg-gray-100 p-2",children:[e.jsx("h2",{className:"text-md tracking-wide font-dm-snas font-semibold",children:"Phone:"}),e.jsx("p",{className:"text-sm tracking-wide",children:s.phone})]}),e.jsxs("div",{className:"flex flex-col gap-3 mb-4 bg-gray-100 p-2",children:[e.jsx("h2",{className:"text-md tracking-wide font-dm-snas font-semibold",children:"Address:"}),e.jsx("p",{className:"text-sm tracking-wide",children:s.address})]}),e.jsxs("div",{className:"flex flex-col gap-3 mb-4 bg-gray-100 p-2",children:[e.jsx("h2",{className:"text-md tracking-wide font-dm-snas font-semibold",children:"Division:"}),e.jsx("p",{className:"text-sm tracking-wide",children:s.division})]}),e.jsxs("div",{className:"flex flex-col gap-3 mb-4 bg-gray-100 p-2",children:[e.jsx("h2",{className:"text-md tracking-wide font-dm-snas font-semibold",children:"Districts:"}),e.jsx("p",{className:"text-sm tracking-wide",children:s.districts})]}),e.jsxs("div",{className:"flex flex-col gap-3 mb-4 bg-gray-100 p-2",children:[e.jsx("h2",{className:"text-md tracking-wide font-dm-snas font-semibold",children:"Upzila:"}),e.jsx("p",{className:"text-sm tracking-wide",children:s.upzila})]}),e.jsxs("div",{className:"flex flex-col gap-3 mb-4 bg-gray-100 p-2",children:[e.jsx("h2",{className:"text-md tracking-wide font-dm-snas font-semibold",children:"Zip Code:"}),e.jsx("p",{className:"text-sm tracking-wide",children:s.zip})]})]}),e.jsx("button",{onClick:d,className:"px-10 py-2 bg-primary text-white rounded-md cursor-pointer",children:"Edit"}),e.jsxs(D,{isOpen:o,onRequestClose:x,className:"bg-white shadow-2xl p-8 rounded-2xl max-w-lg w-full mx-auto my-20 relative",overlayClassName:"fixed inset-0 bg-black bg-opacity-70 flex justify-center items-center z-50",contentLabel:"User Information Panel",children:[e.jsx(I,{onClick:x,size:36,className:"cursor-pointer text-primary absolute top-3 right-3 hover:scale-110 transition"}),e.jsx("h2",{className:"text-2xl font-semibold text-gray-800 mb-6 text-center",children:"User Information"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-5",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700 mb-1 font-medium",children:"Name"}),e.jsx("input",{type:"text",name:"name",value:s.name,onChange:l,className:"w-full border border-gray-300 px-3 py-2 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700 mb-1 font-medium",children:"Email"}),e.jsx("input",{type:"email",name:"email",value:s.email,onChange:l,className:"w-full border border-gray-300 px-3 py-2 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700 mb-1 font-medium",children:"Phone"}),e.jsx("input",{type:"text",name:"phone",value:s.phone,onChange:l,className:"w-full border border-gray-300 px-3 py-2 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700 mb-1 font-medium",children:"Division"}),e.jsx("input",{type:"text",name:"division",value:s.Division,onChange:l,className:"w-full border border-gray-300 px-3 py-2 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700 mb-1 font-medium",children:"District"}),e.jsx("input",{type:"text",name:"districts",value:s.Districts,onChange:l,className:"w-full border border-gray-300 px-3 py-2 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700 mb-1 font-medium",children:"Upazila"}),e.jsx("input",{type:"text",name:"upzila",value:s.Upzilla,onChange:l,className:"w-full border border-gray-300 px-3 py-2 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700 mb-1 font-medium",children:"Zip Code"}),e.jsx("input",{type:"text",name:"zip",value:s.Zip,onChange:l,className:"w-full border border-gray-300 px-3 py-2 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary"})]}),e.jsxs("div",{className:"sm:col-span-2",children:[e.jsx("label",{className:"block text-gray-700 mb-1 font-medium",children:"Address"}),e.jsx("textarea",{name:"address",value:s.address,onChange:l,rows:"3",className:"w-full border border-gray-300 px-3 py-2 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary"})]})]}),e.jsx("button",{onClick:m,className:"mt-6 w-full bg-primary text-white py-2 rounded-lg hover:bg-secondary transition duration-300",children:"Save Profile"})]})]})},T=()=>{const[s,n]=i.useState([]);return i.useEffect(()=>{y.get("https://dailymart.up.railway.app/api/users/orders").then(t=>n(t.data)).catch(t=>console.error("Failed to fetch orders:",t))},[]),console.log(s),e.jsxs("div",{className:"max-w-5xl mx-auto p-4",children:[e.jsx("h1",{className:"text-2xl font-bold mb-6 text-center",children:"All Orders"}),e.jsx("div",{className:" grid sm:grid-cols-2 gap-3",children:s.map(t=>e.jsxs("div",{className:"bg-white shadow-lg rounded-2xl p-4  gap-4",children:[e.jsx("div",{children:e.jsx("img",{src:t.productImage,alt:t.productName,className:"w-full sm:w-28 h-28 rounded-lg object-contain"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h2",{className:"text-xl font-bold mb-1",children:t.productName}),e.jsxs("p",{className:"text-gray-600 mb-2",children:["Price: ",e.jsx("span",{className:"text-green-600 font-semibold",children:t.price})]}),e.jsxs("p",{className:"text-sm text-gray-500 mb-2",children:["Payment: ",e.jsx("span",{className:"text-gray-700",children:t.paymentMethod})]}),e.jsxs("div",{className:"mt-4",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold",children:"Name:"})," ",t.name]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold",children:"Email:"})," ",t.email]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold",children:"Phone:"})," ",t.phone]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold",children:"Address:"})," ",t.address]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold",children:"Post Code:"})," ",t.pcode]})]}),e.jsxs("div",{className:"mt-4 flex justify-between items-center",children:[e.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${t.status==="pending"?"bg-yellow-200 text-yellow-800":"bg-green-200 text-green-800"}`,children:t.status}),e.jsxs("span",{className:"text-sm text-gray-400",children:["Order Date: ",new Date(t.createdAt).toLocaleDateString()]})]})]})]},t._id))})]})},W=()=>e.jsx("div",{children:e.jsx("h1",{className:"text-center my-10 text-3xl font-bold ",children:"Coming soon......."})}),J=()=>{const{cartItems:s,totalPrice:n,shappingFee:t}=f(a=>a.cart);console.log(s);const[c,o]=i.useState(null),r=v(),d=j(),x=a=>{r("/checkout"),d(B(a))},l=()=>{c?x(c):F.error("Please select a product to checkout",{position:"top-right",autoClose:2e3})},m=()=>{N.fire({title:"Are you sure?",text:"You will not be able to recover this item!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#4C1D95",cancelButtonColor:"#F59E0B",confirmButtonText:"Yes, delete it!"}).then(a=>{a.isConfirmed&&(d(L()),r("/"))})};return e.jsxs("div",{className:" min-h-screen",children:[e.jsxs("div",{className:"w-11/12 mx-auto  ",children:[e.jsx("div",{}),e.jsxs("div",{className:"flex justify-between items-center rounded mb-4 p-4",children:[e.jsx("h1",{className:"text-xl font-semibold text-gray-700 ",children:"Shopping Cart"}),e.jsx("button",{onClick:m,className:"text-lg tracking-wider font-medium hover:text-red-500 transition-all duration-300 cursor-pointer",children:"All Delete"})]}),s.length===0?e.jsx("p",{className:"text-center text-light text-lg",children:"Your cart is empty"}):e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-6",children:[e.jsx("div",{className:"sm:col-span-2 bg-white sm:p-4 rounded-lg ",children:s.map(a=>e.jsxs("div",{className:"sm:flex items-center border-b-2 border-gray-300 py-4 space-x-9",children:[e.jsx("img",{src:a.img,alt:a.title,loading:"lazy",className:"w-12 h-12 object-contain rounded-md"}),e.jsxs("div",{className:"ml-4 flex-1 max-sm:flex gap-4 items-center",children:[e.jsx("h3",{className:"text-sm font-medium",children:a.title}),e.jsxs("p",{className:"text-gray-500 text-sm",children:[" ",a.price]})]}),e.jsxs("div",{className:"flex items-center gap-5 px-4",children:[e.jsxs("div",{className:"flex items-center space-x-5",children:[e.jsx("button",{onClick:()=>d(P(a._id)),disabled:a.quantity===1,className:`px-3 text-lg font-bold rounded-md  ${a.quantity===1?"bg-secondary cursor-not-allowed":"bg-gray-100 text-dark "}`,children:"-"}),e.jsx("span",{className:"text-lg font-medium",children:a.quantity}),e.jsx("button",{onClick:()=>d(z(a)),className:"px-3 text-lg font-bold rounded-md bg-gray-100 cursor-pointer ",children:"+"})]}),e.jsx("button",{onClick:()=>d(O(a._id)),className:" text-dark hover:text-red-600  cursor-pointer  rounded-md text-sm",children:e.jsx(A,{size:20})}),e.jsx("button",{onClick:()=>o(a),className:`text-dark  cursor-pointer rounded-md text-sm 
                          ${c&&c._id===a._id?"text-secondary":"text-primary"}
                        `,children:e.jsx(U,{size:20})})]})]},a._id))}),e.jsxs("div",{className:" p-4 rounded-lg ",children:[e.jsx("h2",{className:"text-lg font-semibold mb-3",children:"Order Summary"}),e.jsxs("div",{className:"flex justify-between text-gray-600",children:[e.jsx("span",{children:"Subtotal"}),e.jsxs("span",{children:["$",n]})]}),e.jsxs("div",{className:"flex justify-between text-gray-600",children:[e.jsx("span",{children:"ShappingFee"}),e.jsxs("span",{children:["$",t]})]}),e.jsxs("div",{className:"flex justify-between text-gray-600",children:[e.jsx("span",{children:"Total"}),e.jsxs("span",{children:["$",t+n]})]}),e.jsx("button",{onClick:l,className:"w-full bg-secondary hover:opacity-80 transition-all duration-300 cursor-pointer text-white mt-4 py-2 rounded-lg font-medium",children:"Proceed to Checkout"})]})]})]}),e.jsx(E,{})]})},V=({handleLogout:s})=>{const n=j(),t=f(o=>o.ui.activeComponent);console.log(t);const c=()=>{switch(t){case"":return e.jsx(b,{});case"profile":return e.jsx(q,{});case"orders":return e.jsx(T,{});case"whishlist":return e.jsx(M,{});case"cart":return e.jsx(J,{});case"Settings":return e.jsx(W,{});default:return e.jsx(b,{})}};return e.jsx("div",{children:e.jsxs("div",{children:[e.jsx("nav",{className:"flex justify-between items-center p-2 bg-gray-100",children:e.jsx(u,{onClick:()=>n(g("")),className:"text-xl font-semibold tracking-wide",children:"Dashboard"})}),e.jsx(i.Suspense,{fallback:"loading",children:e.jsx("div",{children:c()})})]})})},Y=({user:s,handleLogout:n})=>{const t=i.useRef(null),[c,o]=i.useState(""),r=j(),d=()=>{t.current.click()},x=l=>{const m=l.target.files[0],a=new FileReader;a.onload=()=>{const h=a.result;localStorage.setItem("profileImages",h),o(h)},m&&a.readAsDataURL(m)};return i.useEffect(()=>{const l=localStorage.getItem("profileImages");o(l||"https://via.placeholder.com/150")},[]),e.jsxs("div",{className:"bg-gray-100 px-2 sm:border-b-0 border-b-2 border-primary h-screen relative",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"relative flex justify-center items-center object-contain mb-4",children:[e.jsx("img",{className:"w-30 h-30 rounded-full",src:c,alt:""}),e.jsx("input",{onChange:x,ref:t,type:"file",className:"hidden"}),e.jsx("button",{onClick:d,title:"Change profile picture",className:"absolute sm:bottom-2 sm:right-20 bottom-4 right-24   text-center rounded-full  cursor-pointer ",children:e.jsx(R,{size:15,color:"red",className:"hover:text-primary duration-300 transition-all"})})]}),e.jsxs("h2",{className:"text-center sm:text-lg font-semibold tracking-tighter flex items-center justify-center gap-1",children:[e.jsx("span",{children:s==null?void 0:s.name})," ",e.jsx("span",{children:e.jsx($,{color:"green",size:25})})]}),e.jsx("p",{className:"text-center text-sm font-normal tracking-tighter",children:s==null?void 0:s.email})]}),e.jsx("div",{className:"border-t my-4 border-gray-400 ",children:e.jsx("nav",{children:e.jsxs("ul",{className:"flex flex-col gap-2 ",children:[e.jsx("li",{className:"text-center ",children:e.jsxs(u,{onClick:()=>r(g("profile")),href:"#",className:"text-lg font-medium hover:text-secondary transition-all duration-300 flex items-center justify-between gap-5 hover:ml-4 p-1  ",children:[e.jsx("span",{className:"text-sm my-2",children:" Profile Overview"})," ",e.jsx("span",{children:e.jsx(p,{size:20})})]})}),e.jsx("li",{className:"text-center ",children:e.jsxs(u,{onClick:()=>r(g("orders")),href:"#",className:"text-lg font-medium hover:text-secondary transition-all duration-300  flex items-center justify-between gap-5 hover:ml-4 p-1  ",children:[e.jsx("span",{className:"text-sm ml-4",children:" My Orders"})," ",e.jsx("span",{children:e.jsx(p,{size:20})})]})}),e.jsx("li",{className:"text-center  ",children:e.jsxs(u,{onClick:()=>r(g("whishlist")),href:"#",className:"text-lg font-medium hover:text-secondary transition-all duration-300  flex items-center justify-between gap-5 hover:ml-4 p-1  ",children:[e.jsx("span",{className:"text-sm ml-4",children:" My Wishlist"})," ",e.jsx("span",{children:e.jsx(p,{size:20})})]})}),e.jsx("li",{className:"text-center  ",children:e.jsxs(u,{onClick:()=>r(g("cart")),href:"#",className:"text-lg font-medium hover:text-secondary transition-all duration-300  flex items-center justify-between gap-5 hover:ml-4 p-1 ",children:[e.jsx("span",{className:"text-sm ml-4",children:" My Cart List"})," ",e.jsx("span",{children:e.jsx(p,{size:20})})]})}),e.jsx("li",{className:"text-center ",children:e.jsxs(u,{onClick:()=>r(g("Settings")),href:"#",className:"text-lg font-medium hover:text-secondary transition-all duration-300  flex items-center justify-between gap-5 hover:ml-4 p-1   ",children:[e.jsx("span",{className:"text-sm ml-4",children:" Settings"})," ",e.jsx("span",{children:e.jsx(p,{size:20})})]})}),e.jsx("button",{onClick:()=>n(),className:"text-sm  cursor-pointer hover:text-secondary  duration-300 transition-all w-full absolute bottom-0 left-0 bg-primary mb-1 text-white py-2 font-bold ",children:"Logout"})]})})})]})},Z=()=>e.jsx("div",{className:" py-50 flex items-center justify-center bg-red-50",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{className:"text-2xl font-bold text-red-600",children:"Access Denied"}),e.jsx("p",{className:"text-gray-600 mt-2",children:"Please login to view the dashboard."})]})}),H=()=>{const[s,n]=i.useState(null),t=localStorage.getItem("token"),c=v(),o=f(l=>l.loginCheck.isLoggedIn);console.log(o),i.useEffect(()=>{t&&y.get("https://dailymart.up.railway.app/api/users/protected-data",{headers:{Authorization:`Bearer ${t}`}}).then(l=>{n(l.data)}).catch(l=>{var m,a;console.error(((a=(m=l.response)==null?void 0:m.data)==null?void 0:a.message)||"Error fetching data")})},[t]);const r=f(l=>l.user.user),d=j(),x=()=>{localStorage.removeItem("token"),d(_()),c("/")};return e.jsx(e.Fragment,{children:s?e.jsx("div",{children:e.jsx("div",{className:"w-11/12 mx-auto border border-gray-200",children:e.jsxs("div",{className:"grid sm:grid-cols-5  ",children:[e.jsx("div",{className:"sm:col-span-1 ",children:e.jsx(Y,{user:r,handleLogout:x})}),e.jsx("div",{className:"sm:col-span-4 ",children:e.jsx(V,{user:r})})]})})}):e.jsx(Z,{})})};export{H as default};
